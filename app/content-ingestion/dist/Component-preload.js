//@ui5-bundle com/scb/treasury/contentingestion/Component-preload.js
sap.ui.require.preload({
	"com/scb/treasury/contentingestion/Component.js":function(){
sap.ui.define(["sap/fe/core/AppComponent"],function(e){"use strict";return e.extend("com.scb.treasury.contentingestion.Component",{metadata:{manifest:"json"}})});
},
	"com/scb/treasury/contentingestion/controller/CustomExpandedHeader.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/ControllerExtension","sap/m/MessageBox","sap/ui/core/BusyIndicator","sap/ui/core/Fragment","./service"],function(e,t,o,n,s){"use strict";return e.extend("com.scb.treasury.contentingestion.controller.CustomExpandedHeader",{onInit:function(){},_getBaseURL:function(){const e=sap.ui.core.Component.getOwnerComponentFor(this.base.getView()).getManifestEntry("/sap.app/id").replaceAll(".","/");return sap.ui.require.toUrl(e)},onfetchCSRF:async function(e){const t=await fetch(e,{method:"HEAD",credentials:"include",headers:{"X-CSRF-Token":"Fetch"}});const o=t.headers.get("X-CSRF-Token");if(!o){throw new Error("Failed to fetch CSRF token")}return o},onfetchData:async function(e){const t=sap.ui.require.toUrl("com/scb/treasury/contentingestion")+"/api/upload";const o=sap.ui.require.toUrl("com/scb/treasury/contentingestion");const n=await this.onfetchCSRF(o);console.log(e);let s=new FormData;s.append("file",e);try{const e=await fetch(t,{method:"POST",headers:{"X-CSRF-Token":n},body:s});if(!e.message){sap.m.MessageToast.show(e.message)}}catch(e){console.error("API Error:",e)}return response},_getText:function(e,t){return this.base.getOwnerComponent().getModel("i18n").getResourceBundle().getText(e,t)},onFileChange:function(e){const o=e.getSource();const n=e.getParameter("files")[0];if(!n||n.type!=="application/pdf"){t.error(this._getText("fileTypeError"));o.setValue("");return}this.file=n},calculateFileHash:async function(e){const t=await e.arrayBuffer();const o=await crypto.subtle.digest("SHA-256",t);const n=Array.from(new Uint8Array(o));return n.map(e=>e.toString(16).padStart(2,"0")).join("")},onOpenDialog:function(){var e=this;if(!this._oDialog){n.load({id:this.getView().getId(),name:"com.scb.treasury.contentingestion.fragment.MyDialog",controller:this}).then(function(t){e._oDialog=t;e.getView().addDependent(t);e.oDialog.open()})}else{this._oDialog.open()}},onCloseDialog:function(){this._oDialog.close()},onUploadFile:async function(){try{o.show(0);sap.m.MessageToast.show("opening dialog box");this.onOpenDialog();const e=this.base.byId("__fileUploader");const t=e.getDomRef("fu").files[0];const n=this.base.byId("__checkboxQA").getSelected();const s=this.base.byId("__checkboxSummary").getSelected();if(!n&&!s){sap.m.MessageToast.show("Please select at least one checkbox.");return}if(!t){sap.m.MessageToast.show("Please select a file to upload.");return}const a=this.onfetchData(t);if(a.metadata.processing_decision=="REJECTED")return;else{const o=await this.calculateFileHash(t);const a=t.name;const i=t.type;const r=`./v2/odata/v4/catalog/Content('${o}')/content`;const c=[];if(n){c.push({keyID:`QA_${o}`,fileName:a,mediaType:i,tagType:"QA",status:"SUBMITTED",url:r})}if(s){c.push({keyID:`SUM_${o}`,fileName:a,mediaType:i,tagType:"SUMMARY",status:"DRAFT",url:r})}if(e.getValue()){e.setValueState("None");await this._postInitialFileRecord(c);e.setValue("");this.base.byId("__checkboxQA").setSelected(false);this.base.byId("__checkboxSummary").setSelected(false)}else{e.setValueState("Error")}}}catch(e){console.error(e);t.error(this._getText("fileUploadError"),{details:e})}finally{o.hide()}},_readFileAsBase64:function(e){return new Promise((t,o)=>{const n=new FileReader;n.onload=e=>t(e.target.result.split(",")[1]);n.onerror=o;n.readAsDataURL(e)})},_postInitialFileRecord:async function(e){try{const t=this.getView().getModel();const o=await s.createContent(this.base,{initialData:JSON.stringify(e)},"CatalogService.EntityContainer/createContent",t);if(o){const e=this.base.getExtensionAPI().getModel();e.refresh()}}catch(e){this._handleException(e,"_postInitialInvoiceRecord")}},_handleException:function(e,o){const n=e instanceof Error?{"Error Location":o,name:e.name,message:e.message,stack:e.stack}:{"Error Location":o,...e};console.error("Handled Error:",n);t.error("An unexpected error occurred.")}})});
},
	"com/scb/treasury/contentingestion/controller/service.js":function(){
sap.ui.define(["../lib/util"],function(n){"use strict";async function t(t,e,i,u){return await n.executeUnBoundInvokeAction(t,u,i,e)}return{createContent:t}});
},
	"com/scb/treasury/contentingestion/fragment/CustomExpandedHeader.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:l="sap.ui.layout"\n    xmlns:u="sap.ui.unified"><VBox class="customUploadContainer sapUiSmallMargin" width="100%" height="100%"><Title text="Upload Content" level="H4" class="sapUiSmallMarginBottom customTitle" /><VBox class="customCard sapUiSmallMarginBottom" width="100%"><Label \n                id="__uploaderLabel" \n                text="Select File" \n                labelFor="__fileUploader" \n                required="true" \n                class="sapUiTinyMarginBottom customLabel" /><u:FileUploader \n                id="__fileUploader" \n                width="300px"\n                tooltip="Choose file to be uploaded" \n                change="onFileChange" \n                fileType="pdf" \n                maximumFileSize="5" \n                class="sapUiSmallMarginBottom" /><HBox alignItems="Center" class="sapUiSmallMarginBottom sapUiTinyMarginTop"><Label text="To be used in:" class="sapUiSmallMarginEnd customLabel"/><HBox><CheckBox \n                        id="__checkboxQA" \n                        text="QA" \n                        selected="false" \n                        select="onQAChecked" \n                        class="sapUiSmallMarginEnd customCheckbox" /><CheckBox \n                        id="__checkboxSummary" \n                        text="Summary" \n                        selected="false" \n                        class="sapUiSmallMarginEnd customCheckbox" /></HBox></HBox><Button \n                id="__uploaderButton" \n                text="Upload Attachment" \n                press=".extension.com.scb.treasury.contentingestion.controller.CustomExpandedHeader.onUploadFile"\n                type="Emphasized" \n                class="customUploadButton" /></VBox></VBox></core:FragmentDefinition>\n',
	"com/scb/treasury/contentingestion/fragment/MyDialog.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"><Dialog\n        id="myDialog"\n        title="My Dialog"><content><Input\n                id="myInput"\n                placeholder="Enter something"/></content><endButton><Button\n                id="__closeButton" \n                text="Close"\n                press=".onCloseDialog"/></endButton></Dialog></core:FragmentDefinition>',
	"com/scb/treasury/contentingestion/fragment/SummaryFiles.fragment.xml":'<core:FragmentDefinition\n    xmlns:core="sap.ui.core"\n    xmlns="sap.m"\n><FlexBox\n        items="{summaryFiles}"\n        wrap="Wrap"\n        direction="Column"\n    ><items><Link\n                text="{fileName}"\n                href="{url}"\n                target="_blank"\n                class="sapUiTinyMarginBottom"\n            /></items></FlexBox></core:FragmentDefinition>\n',
	"com/scb/treasury/contentingestion/i18n/i18n.properties":'# This is the resource bundle for com.scb.treasury.contentingestion\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=Content Ingestion\n\n#YDES: Application description\nappDescription=An SAP Fiori application.',
	"com/scb/treasury/contentingestion/lib/util.js":function(){
sap.ui.define([],function(){"use strict";function e(e,n){return n?.getModel("i18n")?.getResourceBundle()?.getText(e)}async function n(e,n,t,o={}){const i=[];Object.entries(o).forEach(([e,n])=>{i.push({name:e,value:n})});return new Promise(function(o,u){e.editFlow.invokeAction(t,{model:n,parameterValues:i,skipParameterDialog:true,invocationGrouping:true}).then(function(e){const n=e;if(n?.status=="FAILED"){u(n)}else{o(n)}}).catch(e=>{u(e)})})}return{getI18nText:e,executeUnBoundInvokeAction:n}});
},
	"com/scb/treasury/contentingestion/manifest.json":'{"_version":"1.65.0","sap.app":{"id":"com.scb.treasury.contentingestion","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:lrop","version":"1.18.0","toolsId":"9842a62a-874a-486d-81f6-3c8271b26b9b"},"dataSources":{"mainService":{"uri":"/odata/v4/catalog/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.136.1","libs":{"sap.m":{},"sap.ui.core":{},"sap.fe.templates":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"com.scb.treasury.contentingestion.i18n.i18n"}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}},"@i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties"}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{},"routes":[{"pattern":":?query:","name":"ContentList","target":"ContentList"},{"pattern":"Content({key}):?query:","name":"ContentObjectPage","target":"ContentObjectPage"}],"targets":{"ContentList":{"type":"Component","id":"ContentList","name":"sap.fe.templates.ListReport","options":{"settings":{"contextPath":"/Content","variantManagement":"Page","navigation":{"Content":{"detail":{"route":"ContentObjectPage"}}},"controlConfiguration":{"@com.sap.vocabularies.UI.v1.LineItem#Sum":{"tableSettings":{"type":"ResponsiveTable"},"columns":{"SummaryFiles":{"position":{"anchor":"DataField::fileName","placement":"After"},"header":"Summary Files","template":"com.scb.treasury.contentingestion.fragment.SummaryFiles","visible":"{= ${tagType_code} !== \'QA\' }"}}},"@com.sap.vocabularies.UI.v1.LineItem#SumInbox":{"tableSettings":{"type":"ResponsiveTable"},"columns":{"SummaryFiles":{"position":{"anchor":"DataField::fileName","placement":"After"},"header":"Summary Files","template":"com.scb.treasury.contentingestion.fragment.SummaryFiles","visible":"{= ${tagType_code} !== \'QA\' }"}}}},"views":{"paths":[{"key":"qa","annotationPath":"com.sap.vocabularies.UI.v1.SelectionPresentationVariant#qa","visible":"{= ${/ActionVisibility/isMaker} }"},{"key":"summary","annotationPath":"com.sap.vocabularies.UI.v1.SelectionPresentationVariant#summary","visible":"{= ${/ActionVisibility/isMaker} }"},{"key":"qainbox","annotationPath":"com.sap.vocabularies.UI.v1.SelectionPresentationVariant#qainbox","visible":"{= ${/ActionVisibility/isChkr} }"},{"key":"summaryinbox","annotationPath":"com.sap.vocabularies.UI.v1.SelectionPresentationVariant#summaryinbox","visible":"{= ${/ActionVisibility/isChkr} }"}]},"initialLoad":"Enabled","liveMode":true,"content":{"header":{"customHeader":{"expandedHeaderFragment":"com.scb.treasury.contentingestion.fragment.CustomExpandedHeader","visible":"{= ${/ActionVisibility/isMaker} }"}}}}}},"ContentObjectPage":{"type":"Component","id":"ContentObjectPage","name":"sap.fe.templates.ObjectPage","options":{"settings":{"editableHeaderContent":false,"contextPath":"/Content"}}}}},"extends":{"extensions":{"sap.ui.controllerExtensions":{"sap.fe.templates.ListReport.ListReportController":{"controllerName":"com.scb.treasury.contentingestion.controller.CustomExpandedHeader"}}}}},"sap.fiori":{"registrationIds":[],"archeType":"transactional"},"sap.cloud":{"public":true,"service":"Treasury"}}'
});
//# sourceMappingURL=Component-preload.js.map
