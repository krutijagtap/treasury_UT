//@ui5-bundle treasuryui/Component-preload.js
sap.ui.require.preload({
	"treasuryui/Component.js":function(){
sap.ui.define(["sap/ui/core/UIComponent","treasuryui/model/models","treasuryui/model/chatModel"],(e,t,i)=>{"use strict";return e.extend("treasuryui.Component",{metadata:{manifest:"json",interfaces:["sap.ui.core.IAsyncContentCreation"]},init(){e.prototype.init.apply(this,arguments);this.setModel(t.createDeviceModel(),"device");this.getRouter().initialize();this.setModel(new i,"chatModel")}})});
},
	"treasuryui/controller/App.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller"],e=>{"use strict";return e.extend("treasuryui.controller.App",{onInit(){},onAfterRendering(){const e=this.getView().byId("sideNavigation");e.setExpanded(false)},onSideNavButtonPress:function(){const e=this.getView().byId("sideNavigation");const t=e.getExpanded();e.setExpanded(!t)},onItemSelect:function(e){const t=e?.getSource()?.getSelectedKey();this.getOwnerComponent().getRouter().navTo(t)}})});
},
	"treasuryui/controller/ContentIngestion.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/ui/core/Component"],function(n,e,t){"use strict";return n.extend("treasuryui.controller.ContentIngestion",{onInit:function(){},onAfterRendering:function(){const n=this.byId("content")?.getDomRef();if(!n){return}const e=this._isFLP()?this._getFLPUrl():this._getStandaloneUrl();const t=()=>{try{const e=n.contentDocument||n.contentWindow.document;const t=e.createElement("style");t.textContent=`\n              #shell-header, #shell-header-hdr, #header-shellArea { display:none!important; }\n              #shellLayout { padding-top:0!important; }\n            `;e.head.appendChild(t)}catch(n){console.error("Failed to inject style into iframe",n)}};n.removeEventListener("load",t);n.addEventListener("load",t);n.src="https://core-foundational-12982zqn.workzone.cfapps.ap11.hana.ondemand.com/6eb4b4f5-b234-4432-af74-1ebc7d0dfcc7.Treasury.comscbtreasurycontentingestion-0.0.1"},_isFLP:()=>!!sap.ushell?.Container,_getStandaloneUrl:function(){const n=window.location.href.split("#")[0];return n.replace(/(\/[^\/]+\.earningupload\.)[^.]+(-[\d.]+\/index\.html)/,"$1comscbuploadearnings$2")},_getFLPUrl:function(){const n=window.location.href;const e=new URL(n);const t=e.searchParams.get("siteId");const o=e.searchParams.get("sap-ui-app-id");const a="sap-ui-app-id-hint=saas_approuter_"+o;const s={peeranalysis:"Banks-update",uploadearnings:"Earnings-upload"};const r=s[o]||"home";const i=`${e.origin}/site?siteId=${t}`;const c=i+"#Earnings-upload?sap-ui-app-id-hint=saas_approuter_com.scb.uploadearnings";return c}})});
},
	"treasuryui/controller/TreasuryMainView.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","sap/m/PDFViewer","sap/m/BusyDialog","sap/m/MessageToast"],(e,t,s,n,o)=>{"use strict";return e.extend("treasuryui.controller.TreasuryMainView",{onInit(){let e=new sap.ui.model.json.JSONModel;this.getView().setModel(e,"treasuryModel")},onfetchCSRF:async function(e){const t=await fetch(e,{method:"GET",headers:{"X-CSRF-Token":"Fetch"}});const s=t.headers.get("X-CSRF-Token");if(!s){throw new Error("Failed to fetch CSRF token")}return s},onSelectDocument:function(e){var t=e.getSource();var s=t.getSelectedItems();var n=s.map(function(e){return"File: "+e.getText()});n.push("Question: ");var o=n.join("\n");this.byId("chatFeedInput").setValue(o)},onUserChat:async function(){const e=this.getOwnerComponent().getModel("chatModel");const t=this.getView();const s=this.byId("chatFeedInput").getValue();var n=this.byId("multiCombo").getSelectedItems();const o=s.toLowerCase().includes("intellibase");const a=o||n.length>0;e.setSubmit(false);e.setvisibleResult(false);const r=new sap.m.BusyDialog({title:"Busy Indicator",text:"Generating response. Please standby.."});r.open();t.setBusy(true);await Promise.resolve();try{const t=await this.onfetchData(s,a,o);e.setResult(t);e.setvisibleResult(true);console.log(t);return t}catch(e){console.error("Chat fetch error:",e);sap.m.MessageToast.show("Failed to get response.")}finally{r.close();t.setBusy(false)}},onfetchData:async function(e,s,n){const o=this.getBaseUrl()+"/api/chat";const a=this.getBaseUrl()+"/user-api/currentUser";var r;const i=this.fetchCsrfToken();const c=this.byId("pdfContainer");c.removeAllItems();const l=new AbortController;const u=setTimeout(()=>{l.abort()},9e4);const h=await fetch(a,{method:"GET",headers:{"X-CSRF-Token":i,"Content-Type":"application/json"}});if(!h.ok){t.error("Not a valid user");return}const m=await h.json();const d=m.name;if(!s){t.error("Please select a file or Ask Intellibase");return}if(n){r={message:"user_id:"+d+":"+e}}else{r={message:e}}try{const e=await fetch(o,{method:"POST",headers:{"X-CSRF-Token":i,"Content-Type":"application/json"},body:JSON.stringify(r),signal:l.signal});clearTimeout(u);if(!e.ok){throw new Error(`HTTP error! Status: ${e.status}`)}const t=await e.json();const s=t.FINAL_RESULT+"<h3>SQL Query Used:</h3>"+"<pre style='font-family: monospace; white-space: pre-wrap;'>"+t.SQL_QUERY+"</pre>";const n=new sap.m.FormattedText({htmlText:s});c.addItem(n);console.log("API Response:",s);return c}catch(e){console.log("inside catch of askFinsight",e)}},onGenerateSummary:async function(e){var s=this.byId("multiCombo").getSelectedItems();var n=this.byId("chatFeedInput");if(s.length>1||s.length==0){t.error("Please select a single file to Generate Summary.");return}var o=s[0].getText();n.setValue(`Research Summary: ${o}`);this._callSummaryApi("Research Summary: C-PressRelease-2Q25.pdf",o)},getBaseUrl:function(){return sap.ui.require.toUrl("treasuryui")},fetchCsrfToken:async function(){let e=this.getBaseUrl();const t=await fetch(e,{method:"HEAD",credentials:"include",headers:{"X-CSRF-Token":"Fetch"}});const s=t.headers.get("X-CSRF-Token");return s},_callSummaryApi:async function(e,t){const s=new n({text:"Fetching summary..."});s.open();const a=this.getOwnerComponent().getModel("chatModel");const r=this.getBaseUrl()+"/api/chat";const i=this.fetchCsrfToken();const c={message:"Research Summary: "+t};a.setSubmit(false);a.setvisibleResult(false);try{const e=await fetch(r,{method:"POST",headers:{"X-CSRF-Token":i,"Content-Type":"application/json"},body:JSON.stringify(c)});if(!e.ok){throw new Error(`HTTP error! Status: ${e.status}`)}const t=await e.json();if(t.success&&Array.isArray(t.summary_files)){var l=this._displayPdfFiles(t.summary_files);s.close();a.setResult(l);a.setvisibleResult(true);return l}else{o.show("No summaries returned.")}}catch(e){console.log("inside catch of generate summary",e)}},_displayPdfFiles:function(e){const t=this.byId("pdfContainer");t.removeAllItems();e.forEach(e=>{const s=this._createPdfViewer(e.data,e.filename);t.addItem(s)});return t},_createPdfViewer:function(e,t){const s=atob(e);const n=new Uint8Array(s.length);for(let e=0;e<s.length;e++){n[e]=s.charCodeAt(e)}const o=new Blob([n],{type:"application/pdf"});const a=URL.createObjectURL(o);const r=new sap.m.Button({icon:"sap-icon://download",tooltip:"Download PDF",type:"Transparent",press:function(){const e=document.createElement("a");e.href=a;e.download=t;e.click()}});return new sap.m.Panel({headerText:t,width:"100%",height:"250vh",content:[r,new sap.ui.core.HTML({content:`<iframe src="${a}" class="pdf-iframe" style="width: 100%; height: 150vh;"></iframe>`})],layoutData:new sap.m.FlexItemData({growFactor:1})})}})});
},
	"treasuryui/fragment/FrameHeader.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:tnt="sap.tnt"><tnt:ToolHeader id="toolHeader"><Button\n\t\t\t\t\tid="sideNavigationToggleButton"\n\t\t\t\t\ticon="sap-icon://menu2"\n\t\t\t\t\ttype="Transparent"\n\t\t\t\t\tpress=".onSideNavButtonPress"\n          class="sideNavigationToggleButton"><layoutData><OverflowToolbarLayoutData priority="NeverOverflow" /></layoutData></Button><ToolbarSpacer width="20px" /><Image\n                id="logo"\n                src="{imageModel>/path}/../images/logo.png"\n                decorative="true"\n                class="logo"/></tnt:ToolHeader></core:FragmentDefinition>',
	"treasuryui/fragment/FrameSideContent.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n\txmlns:core="sap.ui.core"\n    xmlns:tnt="sap.tnt"><tnt:SideNavigation id="sideNavigation"\n            expanded="false"\n            itemSelect="onItemSelect"><tnt:NavigationList id="mainList" class="navListIcon"><tnt:NavigationListItem id="chat" text="Ask Treasury" tooltip="Ask Treasury" icon="sap-icon://bbyd-dashboard" key="home"/><tnt:NavigationListItem id="Content" text="Content Ingestion" tooltip="Content Ingestion" icon="sap-icon://manager-insight" key="ContentIngestionView" /></tnt:NavigationList></tnt:SideNavigation></core:FragmentDefinition>',
	"treasuryui/fragment/RejectionDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Dialog\n    id="rejectionDialog"\n    title="Rejection Comment"\n    draggable="true"\n    resizable="true"\n    contentWidth="30rem"\n    type="Message"\n    class="sapUiResponsivePadding--header sapUiResponsivePadding--content sapUiResponsivePadding--footer"><TextArea id="rejectionComment" rows="5" placeholder="Enter reason for rejection..." width="100%" /><beginButton><Button text="Submit" type="Reject" press=".onSubmitRejection"/></beginButton><endButton><Button text="Cancel" press=".onCancelRejection"/></endButton></Dialog></core:FragmentDefinition>',
	"treasuryui/fragment/chatBox.fragment.xml":'<core:FragmentDefinition xmlns="sap.m"\n    xmlns:f="sap.f"\n    xmlns:core="sap.ui.core"\n    xmlns:u="sap.ui.unified"\n    xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"><VBox class="ChatBox dasTextAreaInput"  ><FlexBox id="ChatBotresult" height="5rem" ><TextArea id="chatFeedInput" width="96%" height="500px" class="chattextarea" liveChange="userlivechange"  value="{chatModel>/userMessage}" enabled="{= !${chatModel>/busyIndicator} }" rows="1" growingMaxLines="23" placeholder="{chatModel>/placeHolder}" growing="true"><layoutData><FlexItemData growFactor="1" /></layoutData></TextArea></FlexBox><FlexBox id="chatBusyIndicator1" visible="{chatModel>/busyIndicator}" justifyContent="Center" alignItems="Center" class="busyBox"></FlexBox><FlexBox id="btncontrolls" justifyContent= "Start" alignItems="Start" class="busyBox"><Button text="Ask FinSight"   press="onUserChat" /><Button text="Summary"   press="onGenerateSummary" /></FlexBox></VBox></core:FragmentDefinition>\n',
	"treasuryui/fragment/chatBoxbackup.fragment.xml":'<core:FragmentDefinition xmlns="sap.m"\n    xmlns:f="sap.f"\n    xmlns:core="sap.ui.core"\n    xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"><FlexBox id="ChatBot" class="ChatBox" direction="Column"><FlexBox direction="Column" class="chatFlex hide-scroll"><ScrollContainer id="scrollChatBox" class="hide-scroll" height="100%" width="100%" vertical="true" horizontal="false"><FlexBox id="dynamicChatBox" class="dynamicChatBox" direction="Column"><FlexBox id=\'historyItems\' items="{\n                        path: \'chatModel>/messages\'\n                    }" direction="Column"><items><FlexBox direction="Column"><FlexBox direction="Column" visible="{= %{chatModel>message} !== \'\' &amp;&amp; %{chatModel>message} !== null}"><FlexBox alignItems="Center" justifyContent="End" class="userBox" visible="{= %{chatModel>actor} === \'user\'}"><FormattedText htmlText="{chatModel>message}" class="userMessage" /></FlexBox><FlexBox direction="Column" justifyContent="Start" class="agentBox" visible="{= %{chatModel>actor} === \'bot\'}"><FormattedText htmlText="{chatModel>message}" class="agentMessage response-content" /><HBox class="messageEmotions" id="messageEmotions"><Button icon="sap-icon://copy" type="Transparent" press="onChatCopy" tooltip="{i18n>copyTooltip}"/><Button icon="sap-icon://synchronize" type="Transparent" press="onChatRegenerate" tooltip="{i18n>regenerate}" app:userMessage="{chatModel>userMessage}"/><Button icon="sap-icon://download" type="Transparent" press="onChatExport" tooltip="{i18n>export}" app:message="{chatModel>message}"/></HBox></FlexBox></FlexBox></FlexBox></items></FlexBox></FlexBox><FlexBox id="chatBusyIndicator" visible="{chatModel>/busyIndicator}" justifyContent="Center" alignItems="Center" class="busyBox"><BusyIndicator size="1rem" class="busyIndicator"/></FlexBox></ScrollContainer></FlexBox><FlexBox class="dasTextAreaInput sapUiTinyMarginBeginEnd sapUiTinyMarginBottom" alignItems="Start" visible="{= !${chatModel>/isMinimize}  &amp;&amp;  !${chatModel>/showHistory}}"><TextArea id="chatFeedInput" width="96%" class="chattextarea" liveChange="userlivechange" value="{chatModel>/recentQuery}" enabled="{= !${chatModel>/busyIndicator} }" rows="1" growingMaxLines="23" placeholder="Message" growing="true"><layoutData><FlexItemData growFactor="1" /></layoutData></TextArea><Button id="chatFeedSubmit" icon="sap-icon://paper-plane" type="Emphasized" press="onUserChat" class="dasChatInputSubmitButton sapUiTinyMargin"  enabled="{chatModel>/enableSubmit}" /></FlexBox></FlexBox></core:FragmentDefinition>\n',
	"treasuryui/fragment/resultBox.fragment.xml":'<core:FragmentDefinition xmlns="sap.m"\n\n    xmlns:html="http://www.w3.org/1999/xhtml"\n    xmlns:f="sap.f"\n    xmlns:core="sap.ui.core"\n    xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"><FlexBox id="ChatBotResult" class="result" visible="true" direction="Column" ><FlexBox class="summaryBox" ><Title  text="SUMMARY" class="summaryTitle"></Title></FlexBox><FlexBox class="responseTextBox response-content" ><VBox id="pdfContainer" renderType="Bare" class="stretchBox"/></FlexBox></FlexBox></core:FragmentDefinition>\n',
	"treasuryui/i18n/i18n.properties":'# This is the resource bundle for treasuryui\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=Treasury\n\n#YDES: Application description\nappDescription=An SAP Fiori application.\n#XTIT: Main view title\ntitle=Treasury',
	"treasuryui/manifest.json":'{"_version":"1.65.0","sap.app":{"id":"treasuryui","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.18.0","toolsId":"f1d71c23-0929-422c-b771-8a6a4218ea53"},"dataSources":{"mainService":{"uri":"/odata/v4/catalog/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}},"Treasurybackend":{"uri":"/Treasurybackend/","type":"http"}},"crossNavigation":{"inbounds":{"Treasury":{"semanticObject":"treasury","action":"display","title":"Treasury","signature":{"parameters":{},"additionalParameters":"allowed"}}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.136.1","libs":{"sap.m":{},"sap.ui.core":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"treasuryui.i18n.i18n"}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}},"treasuryModel":{"type":"sap.ui.model.odata.v4.ODataModel","settings":{"serviceUrl":"/catalog/"}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","controlAggregation":"pages","controlId":"app","transition":"slide","type":"View","viewType":"XML","path":"treasuryui.view","async":true,"viewPath":"treasuryui.view"},"routes":[{"name":"RouteTreasuryMainView","pattern":":?query:","target":["TargetTreasuryMainView"]},{"pattern":"home","name":"home","target":"HomeView"},{"pattern":"Reports","name":"Reports","target":"ReportsView"},{"pattern":"ContentIngestionView","name":"ContentIngestionView","target":"ContentIngestionView"}],"targets":{"TargetTreasuryMainView":{"id":"TreasuryMainView","name":"TreasuryMainView"},"HomeView":{"id":"TreasuryMainView","name":"TreasuryMainView"},"ReportsView":{"id":"ReportsView","name":"ReportsView"},"ContentIngestionView":{"id":"ContentIngestionView","name":"ContentIngestionView"}}},"rootView":{"viewName":"treasuryui.view.App","type":"XML","id":"App","async":true}},"sap.cloud":{"public":true,"service":"TreasuryUI"}}',
	"treasuryui/model/chatModel.js":function(){
sap.ui.define(["sap/ui/model/json/JSONModel"],function(e){"use strict";const t={busyIndicator:false,enableSubmit:false,visibleResult:false,enableUpload:true,enableQuery:true,userMessage:"",placeHolder:"Get Started by choosing your file or entering a query to Intellibase",busyText:"",result:"",maker:true,checker:true};return e.extend("com.sap.shae.flp.plugins.homepage.chatModel",{constructor:function(){e.prototype.constructor.apply(this,arguments);this.reset()},reset:function(){this.setProperty("/",Object.create(t))},setSubmit:function(e){this.setProperty("/enableSubmit",e)},setvisibleResult:function(e){this.setProperty("/visibleResult",e)},setResult:function(e){this.setProperty("/result",e)},setbusyIndicator:function(e){this.setProperty("/busyIndicator",e)},setenableUpload:function(e){this.setProperty("/enableUpload",e)},setenableQuery:function(e){this.setProperty("/enableQuery",e)},setbusyText:function(e){this.setProperty("/busyText",e)}})});
},
	"treasuryui/model/models.js":function(){
sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
},
	"treasuryui/view/App.view.xml":'<mvc:View controllerName="treasuryui.controller.App"\n    xmlns:html="http://www.w3.org/1999/xhtml"\n    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:uxap="sap.uxap"\n    xmlns:tnt="sap.tnt"><tnt:ToolPage id="toolPage"><tnt:header><core:Fragment fragmentName="treasuryui.fragment.FrameHeader" type="XML"/></tnt:header><tnt:sideContent><core:Fragment fragmentName="treasuryui.fragment.FrameSideContent" type="XML"/></tnt:sideContent><tnt:mainContents><App id="app"/></tnt:mainContents></tnt:ToolPage></mvc:View>',
	"treasuryui/view/ContentIngestionView.view.xml":'<mvc:View \n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:html="http://www.w3.org/1999/xhtml"\n    xmlns:unified="sap.ui.unified"\n    xmlns:uxap="sap.uxap"\n    xmlns:tnt="sap.tnt"\n    controllerName="treasuryui.controller.ContentIngestion"\n><Page id="ContentIngestion" title="Content Ingestion"><content><VBox\n                height="100%"\n                width="100%"\n                class="sapUiSmallMargin"\n                fitContainer="true"\n            ><html:iframe\n                    id="content"\n                    width="100%"\n                    height="100%"\n                    style="border:none; min-height: 800px;"\n                /></VBox></content></Page></mvc:View>',
	"treasuryui/view/TreasuryMainView.view.xml":'<mvc:View xmlns:unified="sap.ui.unified" controllerName="treasuryui.controller.TreasuryMainView"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n\txmlns:uxap="sap.uxap"\n\txmlns:tnt="sap.tnt"\n    \n    ><Page id="page" title="{i18n>title}"><content><FlexBox direction="Column" class="earningsBox"><FlexBox id="chatFlexBox" class="ChatFlexBox" direction="Column"><Title text="How can I help you today?" textAlign="Center" class="TitleFlexBox"/><HBox justifyContent="End"><MultiComboBox id="multiCombo" items="{path:\'/Content\', filters: [{ path: \'status\', operator: \'EQ\', value1: \'COMPLETED\' }]}" selectionChange="onSelectDocument" placeholder="Choose files to analyze"><core:Item key="{ID}" text="{fileName}" /></MultiComboBox></HBox><core:Fragment fragmentName="treasuryui.fragment.chatBox" type="XML"/></FlexBox><FlexBox id="resultFlexBox" class="ResultFlexBox" visible="{chatModel>/visibleResult}"><core:Fragment fragmentName="treasuryui.fragment.resultBox" type="XML"/></FlexBox></FlexBox></content></Page></mvc:View>'
});
//# sourceMappingURL=Component-preload.js.map
